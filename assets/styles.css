/* === v34 PATCH: mobile nav open fix + small polish === */
@media (max-width:960px){
  /* ensure toggle is visible on mobile */
  .nav-toggle{display:inline-flex}

  /* drawer default state */
  .primary-nav{
    position:fixed; top:56px; left:0; right:0; bottom:0;
    display:none; background:#fff; padding:16px; z-index:98;
    box-shadow:0 8px 24px rgba(0,0,0,.08);
    flex-direction:column; gap:0; overflow:auto
  }
  .primary-nav a{display:block; padding:14px 8px; border-bottom:1px solid #efefef; border-radius:0; color:#111}

  /* >>> key change: use general-sibling (~) so minor DOM changes do not break <<< */
  #nav-check:checked ~ .primary-nav{display:flex}
  #nav-check:checked ~ .backdrop{display:block}

  /* animate hamburger to X */
  #nav-check:checked ~ label .bar1{transform:translateY(6px) rotate(45deg)}
  #nav-check:checked ~ label .bar2{opacity:0}
  #nav-check:checked ~ label .bar3{transform:translateY(-6px) rotate(-45deg)}
}

/* Backdrop (kept outside media just in case) */
.backdrop{display:none}
@media (max-width:960px){
  .backdrop{position:fixed; top:56px; left:0; right:0; bottom:0; background:rgba(0,0,0,.35); z-index:97}
}
